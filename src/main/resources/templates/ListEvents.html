<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste des Événements Non Expirés</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>

<h1>Liste des Événements Non Expirés</h1>

<ul id="evenementsList">
    <!-- Les événements seront affichés ici dynamiquement -->
</ul>

<script>
    $(document).ready(function() {
        // Faites une requête AJAX pour récupérer les liens vers les détails des événements
        $.ajax({
            url: '/api/evenements/non-expired',
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                // Manipulez les données ici, par exemple, affichez-les dans la liste
                var evenementsList = $('#evenementsList');

                // Parcourez les liens et ajoutez-les à la liste
                $.each(data, function(index, evenementLink) {
                    // Faites une requête AJAX pour récupérer les détails de l'événement
                    $.ajax({
                        url: evenementLink,
                        type: 'GET',
                        dataType: 'json',
                        success: function(evenementDetails) {
                            // Créez un élément de liste avec les détails de l'événement
                            var listItem = '<li>' +
                                '<strong>' + evenementDetails.titre + '</strong><br>' +
                                'Date: ' + evenementDetails.date + '<br>' +
                                'Place: ' + evenementDetails.place + '<br>' +
                                'Image: <img src="/api/evenements/image/' + evenementDetails.idEvenement + '" alt="Image">' +
                                '<br><a href="' + evenementDetails.details + '">Détails</a>' +
                                '</li>';
                            evenementsList.append(listItem);
                        },
                        error: function(error) {
                            console.error('Erreur lors de la récupération des détails de l\'événement:', error);
                        }
                    });
                });
            },
            error: function(error) {
                console.error('Erreur lors de la récupération des liens d\'événement:', error);
            }
        });
    });
</script>

</body>
</html>
